<html>
    <head>
        <title>Seminario Actualizaci√≥n II - Examen_T3_Punto_6</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS v5.2.1 -->
        <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
        crossorigin="anonymous"
        >
        
        
    </head>
    <body>

        <canvas id="bandera"></canvas>

        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"> </script>
        <script>
            /*
            Para generar el tensor de la bandera primero obtengo un tensor de una imagen modelo. Es decir, primero hago la conversi√≥n de img a tensor. porque no me voy a poner a adivinar a mano cuales son los valores espec√≠ficos de colores rgb que tengo que poner en el tensor para generar exactamente los colores de la bandera de Suiza.
            Luego, es a este tensor que lo vuelvo a convertir a imagen, utilizando los m√©todos de TensorFlow.js

            El c√≥digo se hizo en base a lo presentado en el libro "Aprendiendo TensorFlow.js de Gant Laborde" - Cap√≠tulo 4.        
            */
            // Crear la bandera de Espa√±a

            const image = new Image();
            image.crossOrigin = 'anonymous';
            image.src = "./flag.jpg";
            const bandera = tf.tensor([
                [[255, 0, 0], [255, 0, 0], [255, 0, 0]],
                [[255, 0, 0], [255, 0, 0], [255, 0, 0]],
                [[255, 255, 255], [255, 255, 255], [255, 255, 255]],
                [[255, 0, 0], [255, 0, 0], [255, 0, 0]],
                [[255, 0, 0], [255, 0, 0], [255, 0, 0]]
            ]);

            // Escalar el tensor al doble de tama√±o
            const banderaDoble = tf.image.resizeBilinear(bandera, [bandera.shape[0] * 2, bandera.shape[1] * 2]);

            // Rotar el tensor
            const banderaRotada = tf.image.rot90(banderaDoble);

            // Mostrar la cantidad de bytes de cada tensor
            console.log("Bytes utilizados por el tensor de la bandera original:", bandera.size * 3);
            console.log("Bytes utilizados por el tensor de la bandera escalada al doble:", banderaDoble.size * 3);
            console.log("Bytes utilizados por el tensor de la bandera rotada:", banderaRotada.size * 3);

            // Obtenemos una referencia al elemento canvas
            const canvasBandera = document.getElementById("bandera");

            // Renderizar el tensor de la bandera rotada en el canvas
            tf.browser.toPixels(banderaRotada, canvasBandera).then(() => {
                console.log("Esta es la cantidad de memoria que us√© ü§ñ:", tf.memory().numBytes);
                // Liberar la memoria
                bandera.dispose();
                banderaDoble.dispose();
                banderaRotada.dispose();
            });
        </script>
        
    </body>
</html>

